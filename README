# $Id$

MySQL for NSS systems
=====================

Please read the file INSTALL for generic installation details.

For the impatient:
    On modern systems, you should just be able to
        ./configure
        make
        make install
    You'll need to make sure you system sees the library you just
    installed into /usr/local/lib (unless you changed the destination)
        Linux:
            Add /usr/local/lib to /etc/ld.so.conf and run /sbin/ldconfig.
            Make sure you do this *after* you've installed the library.
        Solaris:
            ...
    Edit nss_mysql.cfg and nss_mysql_root.cfg (/usr/local/etc)
    Edit /etc/nsswitch.conf and add 'mysql' to passwd/shadow/group
    Enjoy!

    On systems with older or nonstandard MySQL installations, you may
    need to use the --with-mysql-lib and/or --with-mysql-inc options.

Debugging:
    Set the config option 'priority' (in the [global] section) to debug.
    Since there are a LOT of debugging messages, you can pick which type(s)
    you want.  Set the config option 'debug_flags' to be the sum of the
    options below that you want:

    MEMORY (malloc, free, etc)          1
    FUNCTION (enter/exit w/ status)     2
    CONNECT (MySQL connect/disconnect)  4
    QUERY (MySQL queries)               8 
    PARSE (File & query result parsing) 16
    FILE (File opening/closing)         32

    For example, if you want all options, set 'debug_flags' to 63
    If you want just CONNECT, set it to 4.  If you want CONNECT
    and QUERY, set it to 12.

    Since there's a period of time where the library has not yet
    loaded your config, the library defaults to logging to
    auth.alert until the config is loaded and the defaults are
    overridden.  If you're not getting ANY messages, it is possible
    that the error is before the config is loaded.  You *should*
    have an error message wherever your auth.alert messages go.
    If you do not, I recommend doing a quick trace ('strace' on Linux)
    of a quick command such as 'id' and looking for whether the
    library even gets loaded, if the library tries to open your
    config file, etc ...  Just 'strace id username-in-sql' should
    do the trick.
    You could also edit nss_mysql.h and change DEF_PRIO to
    LOG_DEBUG, recompile & reinstall, and see if that helps.  If
    it doesn't, the library is probably not being loaded; make sure
    you've:
        Linux:   edited /etc/ld.so.conf, run 'ldconfig', and edited
                 /etc/nsswitch.conf
        Solaris:
                ...
Solaris support:
    Coming soon.  It actually compiles on my Solaris 8 x86 box, but
    I have NOT implemented the interface Solaris requires yet.


Tested with:
    Corel (1.something - Debian 2.1) and MySQL 3.21.33b
    RedHat 6.1 and MySQL 3.20.something
    RedHat 7.1 and MySQL 3.23.49a
    RedHat 7.2 and MySQL 3.23.49a
    RedHat 7.3 and MySQL 3.23.49a
